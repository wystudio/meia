<!DOCTYPE html>
<title>test</title>
<meta charset="GB2312" />
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
<meta name="apple-mobile-web-app-capable" content="no"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
<meta name="description" content="" />
<meta name="keywords" content="" />
<meta name="author" content="touch.dangdang.com" />
<meta http-equiv="Cache-Control" content="must-revalidate,no-cache" />
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<link rel="stylesheet" href="uiBase.css" type="text/css" media="all">
<body>
<div>
     
 <div style="display:block" >  
      <div style="display:block" >  
	   </div>
   <!--广告 -->
	<div class="touch_index_jdt">
                 <div class="tab_content_aa" id="scroller" ontouchstart="touchStart(event)" ontouchmove="touchMove(event)" ontouchend="touchEnd(event)" style="overflow-x: hidden; overflow-y: hidden; ">
                    <ul id="scroller_ul">
                          <li type="item">
                                        <a  href="http://m.dangdang.com/touch/shop.php?shop_id=16475&amp;sid=49b56847729a06d0" title="" >
										 <img src="img/img1.jpg"/>
										</a>                                  
						   </li>
						    <li type="item">
                                        <a  href="http://m.dangdang.com/touch/shop.php?shop_id=16475&amp;sid=49b56847729a06d0" title="" >
										 <img src="img/img2.jpg"/>
										</a>                                  
						   </li>
						   <li type="item">
                                        <a  href="http://m.dangdang.com/touch/shop.php?shop_id=16475&amp;sid=49b56847729a06d0" title="" >
										 <img src="img/img3.jpg"/>
										</a>                                  
						   </li>
						   <li type="item">
                                        <a  href="http://m.dangdang.com/touch/shop.php?shop_id=16475&amp;sid=49b56847729a06d0" title="" >
										 <img src="img/img4.jpg"/>
										</a>                                  
						   </li>
						   <li type="item">
                                        <a  href="http://m.dangdang.com/touch/shop.php?shop_id=16475&amp;sid=49b56847729a06d0" title="" >
										 <img src="img/img5.jpg"/>
										</a>                                  
						   </li>
                         
                            
                    </ul>
                </div>
                  <div class="head">
					   <ul class="tab_aa" id="img_mornitor">
						 <li class=""></li>
						 <li class="on"></li>
						 <li class=""></li><li class="">
						 </li><li class=""></li>
						</ul>
                 </div>

</div>
 <div style="display:block" >  
	   </div>
</div>
    <!--广告 -->
    
      <!--tel-->
		<div class="tel_box">
				
				<div class="content">
					联系电话：029-892958323						
				</div>

				<div class="tel_button">
				  <a> 拨打 </a>
				</div>
	</div>
    <!--tel-->


	

	<!--store link-->
    <div class="store_nav">
        <div class="store_icon">
            <a href="happy.html">
			<div>

				 <span>
				 </span>
			 </div>
			 </a>
		</div>
		<div class="store_link">
             <ul>
               <li>
			     <div>
					 <a href="happy.html">
					   <span class="spanLogo item1">
					   </span>
					   <span class="spanText">
					      美丽预约 
					   </span>
					 </a>
				 </div>
			   </li>
			   <li>
                  <div>
					 <a href="happy.html">
					   <span class="spanLogo item2">
					   </span>
					   <span class="spanText">
					      消费记录 
					   </span>
					 </a>
				 </div>
			      
			   </li>
			   <li>
			     <div>
					 <a href="happy.html">
					   <span span class="spanLogo item3">
					   </span>
					   <span class="spanText">
					      美丽日记
					   </span>
					 </a>
				 </div>
			   </li>
			 </ul>
		</div>


	</div>


    <!--store link-->
     <div  class="div_withBorder">

	 </div>
    
	 <!--product list-->
	 <div>
       <div class="titleText">
	       店项目展示
	   </div>

	    <ul class="storeItem">
				   <li>
					 <div>
						 <div class="itemTitle itemTitle1">
						   美容.SPA
						 </div>
						 <p>
						  <a href="happy.html">
						     <img  src="img/store1.jpg" />
						   </a>
						 </p>
						 <div class="itemText">
							 <span>
							 已售25
							 </span>
							 <span>
							 现价:<font class="price">$68.0</font>
							 <font class="del">$168.0</font>
							 </span>
						</div>
					 </div>
				   </li>

                     <li>
					 <div>
						 <div class="itemTitle itemTitle2">
						   减肥.纤体
						 </div>
						 <p>
						  <a href="happy.html">
						     <img  src="img/store2.jpg" />
						   </a>
						 </p>
						 <div class="itemText">
							 <span>
							 已售54
							 </span>
							 <span>
							 现价:<font class="price">$68.0</font>
							 <font class="del">328.0</font>
							 </span>
						</div>
					 </div>
				   </li>
				   <li>
					 <div>
						 <div class="itemTitle itemTitle3">
						   祛斑.祛痘
						 </div>
						 <p>
						  <a href="happy.html">
						     <img  src="img/store1.jpg" />
						   </a>
						 </p>
						 <div class="itemText">
							 <span>
							 已售35
							 </span>
							 <span>
							 现价:<font class="price">$98.0</font>
							 <font class="del">668.0</font>
							 </span>
						</div>
					 </div>
				   </li>
				   <li>
					 <div>
						 <div class="itemTitle itemTitle4">
						  丰胸
						 </div>
						 <p>
						  <a href="happy.html">
						     <img  src="img/store2.jpg" />
						   </a>
						 </p>
						 <div class="itemText">
							 <span>
							 已售432
							 </span>
							 <span>
							 现价:<font class="price">$213.0</font>
							 <font class="del">1668.0</font>
							 </span>
						</div>
					 </div>
				   </li>
               </ul>
	  
	 </div>
	   <!--product list-->





<script type="text/javascript">
$('.touch_index_jdt .tab_content_aa').attr({'id':'scroller','ontouchstart':"touchStart(event)", 'ontouchmove':'touchMove(event)','ontouchend':'touchEnd(event)'});
$('.touch_index_jdt .tab_content_aa ul').attr({'id':'scroller_ul'});
$('.touch_index_jdt .head ul').attr({'id':'img_mornitor'});
$('.touch_index_jdt .head ul li').remove();
function createPicMove(a, b, c) {
    var g = function(j) {
        return "string" == typeof j ? document.getElementById(j) : j
    };
    var d = function(j, l) {
        for (var k in l) {
            j[k] = l[k]
        }
        return j
    };
    var f = function(j) {
        return j.currentStyle || document.defaultView.getComputedStyle(j, null)
    };
    var i = function(l, j) {
        var k = Array.prototype.slice.call(arguments).slice(2);
        return function() {
            return j.apply(l, k.concat(Array.prototype.slice.call(arguments)))
        }
    };
    var e = {Quart: {easeOut: function(k, j, m, l) {
                return -m * ((k = k / l - 1) * k * k * k - 1) + j
            }},Back: {easeOut: function(k, j, n, m, l) {
                if (l == undefined) {
                    l = 1.70158
                }
                return n * ((k = k / m - 1) * k * ((l + 1) * k + l) + 1) + j
            }},Bounce: {easeOut: function(k, j, m, l) {
                if ((k /= l) < (1 / 2.75)) {
                    return m * (7.5625 * k * k) + j
                } else {
                    if (k < (2 / 2.75)) {
                        return m * (7.5625 * (k -= (1.5 / 2.75)) * k + 0.75) + j
                    } else {
                        if (k < (2.5 / 2.75)) {
                            return m * (7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375) + j
                        } else {
                            return m * (7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375) + j
                        }
                    }
                }
            }}};
    var h = function(k, n, m, l) {
        this._slider = g(n);
        this._container = g(k);
        this._timer = null;
        this._count = Math.abs(m);
        this._target = 0;
        this._t = this._b = this._c = 0;
        this.Index = 0;
        this.SetOptions(l);
        this.Auto = !!this.options.Auto;
        this.Duration = Math.abs(this.options.Duration);
        this.Time = Math.abs(this.options.Time);
        this.Pause = Math.abs(this.options.Pause);
        this.Tween = this.options.Tween;
        this.onStart = this.options.onStart;
        this.onFinish = this.options.onFinish;
        var j = !!this.options.Vertical;
        this._css = j ? "top" : "left";
        var o = f(this._container).position;
        o == "relative" || o == "absolute" || (this._container.style.position = "relative");
        this._container.style.overflow = "hidden";
        this._slider.style.position = "absolute";
        this.Change = this.options.Change ? this.options.Change : this._slider[j ? "offsetHeight" : "offsetWidth"] / this._count
    };
    h.prototype = {SetOptions: function(j) {
            this.options = {Vertical: true,Auto: true,Change: 0,Duration: 50,Time: 10,Pause: 4000,onStart: function() {
                },onFinish: function() {
                },Tween: e.Quart.easeOut};
            d(this.options, j || {})
        },Run: function(j) {
            j == undefined && (j = this.Index);
            j < 0 && (j = this._count - 1) || j >= this._count && (j = 0);
            this._target = -Math.abs(this.Change) * (this.Index = j);
            this._t = 0;
            this._b = parseInt(f(this._slider)[this.options.Vertical ? "top" : "left"]);
            this._c = this._target - this._b;
            this.onStart();
            this.Move()
        },Move: function() {
            clearTimeout(this._timer);
            if (this._c && this._t < this.Duration) {
                this.MoveTo(Math.round(this.Tween(this._t++, this._b, this._c, this.Duration)));
                this._timer = setTimeout(i(this, this.Move), this.Time)
            } else {
                this.MoveTo(this._target);
                this.Auto && (this._timer = setTimeout(i(this, this.Next), this.Pause))
            }
        },MoveTo: function(j) {
			 this._slider.style[this._css] = j + "px"
        },Next: function() {
            this.Run(++this.Index)
        },Previous: function() {
            this.Run(--this.Index)
        },Stop: function() {
            clearTimeout(this._timer);
            this.MoveTo(this._target)
        }};
    return new h(a, b, c, {Vertical: false})
}

// 轮播图片个数
var pic_num = $("#scroller_ul li").length;
$("#scroller_ul").css("width",(pic_num*100 + '%'));

var st = createPicMove("scroller", "scroller_ul", pic_num);
// 插入数字
var forEach = function(array, callback){
    for (var i = 0, len = array.length; i < len; i++) { callback.call(this, array[i], i); }
}
var nums = [];
for(var i = 0, n = st._count - 1; i <= n;i++){
    var li = document.createElement("li");
    nums[i] = document.getElementById("img_mornitor").appendChild(li);
}
// 设置按钮样式
st.onStart = function(){
    //forEach(nums, function(o, i){ o.className = ""})
    forEach(nums, function(o, i){ o.className = st.Index == i ? "on" : ""; })
}
// 重新设置浮动
$("#scroller_ul").css("position","relative");

var _initX = 0;
    var _finishX = 0;
    var _startX = 0;
    var _startY = 0;
    function touchStart(event) {
        _startX = event.touches[0].clientX;
        _startY = event.touches[0].clientY;
        _initX = _startX;
    }
    function touchMove(event) {
        var touches = event.touches;
        var _endX = event.touches[0].clientX;
        var _endY = event.touches[0].clientY;
        if(Math.abs(_endY-_startY)>Math.abs(_endX-_startX)){
            return;     
        }
        event.preventDefault();
        _finishX = _endX;
        var _absX = Math.abs(_endX-_startX);
        var lastX = $('#scroller_ul').css('left').replace('px','');
        if(_startX>_endX){
            st.Stop();
            $('#scroller_ul').css('left',(parseInt(lastX)-_absX)+'px');
        }else{
            st.Stop();
            $('#scroller_ul').css('left',(parseInt(lastX)+_absX)+'px');
        } 
        _startX = _endX;
    }
    //触屏  离开屏幕事件
    function touchEnd(event) {
        if(_finishX==0){
            return;
        }
        if(_initX>_finishX){
            bindEvent(_initX,_finishX);
        }else if(_initX<_finishX){
            bindEvent(_initX,_finishX);
        }
        _initX = 0;
        _finishX = 0;
    }

    /**
     *  绑定触屏触发事件
     * @param start
     * @param end
     */
    function bindEvent(start,end){
         if (start >= end) {
                   st.Next();
                } else {
                    st.Previous();
                }
    }
    st.Run();
    var resetScrollEle = function(){
        var slider2Li = $("#scroller_ul li");
        slider2Li.css("width",100/pic_num+"%");
    }
    resetScrollEle();
</script>

</body>